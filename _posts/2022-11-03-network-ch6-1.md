---
layout: post
title: "计网 Ch6：应用层-1"
author: LJC
tags:
- network
date: 2022-11-03 15:40 +0800
toc: true
---

# 应用层 (Application layer) - Part1

## 1. 应用层概述

应用层享受其下各层提供的服务，解决通过应用进程的交互来**实现特定网络应用的问题**。

应用层作为最顶层，是**设计和建立计算机网络的最终目的**，也是计网中发展最快的部分。
- 早期基于文本的应用（电子邮件，远程登陆，文件传输，新闻）；
- 万维网 www；
- 即时通信，P2P 文件共享，音视频应用；
- 新型网络应用；

接下来以一些经典的网络应用为例，来学习有关**网络应用**的原理，协议和实现方面的知识。

- ![app01.png](/images/net/app01.png "经典的网络应用")

--------------

## 2. 客户-服务器(C/S) 方式 和 对等(P2P) 方式

网络应用程序运行在处于网络边缘的不同端系统上，通过彼此间的通信来共同完成某项任务。

因此开发一种网络应用，首先要考虑的问题是**网络应用程序在各种端系统上的组织方式 和 它们之间的关系**。目前流行的主要有以下两种：
- **客户-服务器** (Clien t/ Server) 方式
- **对等** (Peer-to-Peer) 方式

### 客户-服务器

客户 和 服务器 是指通信中所涉及的**两个应用进程**。这种方式描述的是进程之间的 **服务和被服务的关系**。它是因特网上传统的，最成熟的方式，很多应用都是这种方式，如www，电子邮件等。

- 如图，首先明确一下概念：
    - 主机 A 运行客户程序，正在运行的客户程序称为客户进程/ 客户
        - 运行客户进程的主机称为客户计算机，有时也可简称为客户（区分）；
    - 主机 B 运行服务器程序，正在运行的服务器程序称为服务器进程/ 服务器，
        -  运行服务器进程的主机称为服务器计算机，有时也可简称为服务器；
    - ![app02.png](/images/net/app02.png "客户 和 服务器")

<br/>

- 在 客户-服务器 方式下，客户向服务器请求服务，服务器收到请求后向客户提供服务；
    - 客户是服务请求方
    - 服务器是服务提供方
    - **服务器总是处于运行状态**，并等待客户的服务请求。**服务器具有固定运输层端口号**（如HTTP服务器的默认端口号80），而**运行服务器的主机也具有固定的 IP 地址。**

- 基于C/S方式的应用服务通常是**服务集中型**的，即应用服务集中在网络中比客户计算机少得多的服务器计算机上。
    - 不过，由于一台服务器给多个客户机提供服务，实际应用中**常会出现服务器跟不上众多客户机请求的情况**；
    - 为此，在C/S应用中常用**计算机群集**（服务器场）构建一个强大的**虚拟服务器**。

###  对等方式

对等方式 **没有固定的服务请求者和服务提供者**，各应用进程是对等的，称为**对等方**，它们**相互直接通信**，每个对等方既是服务请求者，又是服务提供者。

- 例如某种网络下载工具软件P2P下载器，如图，E 的 P2P进程正在从 F 下载文件，同时还为D的P2P进程提供下载服务。
    - ![app03.png](/images/net/app03.png "对等方式")

- 基于 P2P 的应用是**服务分散型**的，因为应用服务不是集中在少数几个服务器计算机，而是分散在大量对等计算机中，这些计算机不为ISP所有，而是为个人控制的台式机/笔记本，常位于住宅，校园，办公室等。
- P2P 方式最突出之一是它的**可拓展性**。系统每增加一个对等方，不仅增加了请求者，还增加了服务提供者，**系统性能不会因规模增大而降低**。
- P2P 具有**成本**上的优势，因为它不需要服务器和带宽。

--------------------

## 3. 动态主机配置协议 DHCP

DHCP 是 TCP/IP 协议体系中应用层的协议，它使用运输层的 **UDP** 提供的服务

**DHCP 的作用**：

看如下场景：如何配置用户主机才能使 用户主机正常访问Web服务器？
- ![dhcp01.png](/images/net/dhcp01.png "DHCP场景")

正确配置 IP 地址，子网掩码，默认网关，DNS 服务器等网络相关配置信息。我们可以手工配置，如图：但是网络中主机较多，就不能一个一个配了，而且容易出错！
- ![dhcp02.png](/images/net/dhcp02.png "DHCP场景")

如果给网络中添加一台 **DHCP 服务器**，并在该服务器中设置好 网络中其他各主机的网络配置信息 怎么配，其他主机开机后，自动启动DHCP程序，向DHCP服务器请求自己的网络配置信息，这样网络中各主机都可以从 DHCP 服务器**自动获取**网络配置信息，而不用一个一个手工配置了。
- ![dhcp03.png](/images/net/dhcp03.png "DHCP场景")

### DHCP 工作过程

假设网络中有两台 DHCP 服务器和多台用户主机，下面以一台主机为例：
- ![dhcp04.png](/images/net/dhcp04.png "DHCP工作场景")

DHCP 使用客户-服务器方式：
-  DHCP 服务器上运行 DHCP 服务器进程，可简称为 DHCP 服务器；
-  用户主机上运行 DHCP 客户进程，可简称为 DHCP 客户；

















