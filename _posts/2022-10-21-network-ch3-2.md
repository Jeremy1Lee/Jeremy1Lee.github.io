---
layout: post
title: "计网 Ch3：数据链路层-2"
author: LJC
tags:
- network
date: 2022-10-24 13:50 +0800
toc: true
---

# 三、数据链路层 (Data link layer)

## 7. MAC 地址，IP 地址， ARP 协议

日常的网络应用离不开这些地址；

- MAC 地址【数据链路层】：以太网的 MAC 子层使用的地址；
- IP 地址【网际层】： TCP/IP 体系结构网际层所使用的地址；
- ARP协议【网际层】：属于 TCP/IP 的网际层。作用是已知设备分配到的 IP 地址，通过该 IP 地址获取该设备的 MAC 地址；

![mac-ip01.png](/images/net/mac-ip01.png "MAC 地址，IP 地址， ARP 协议")

- 点对点（1对1）的数据链路层不需要地址。当多个主机连在同一个广播信道上，要想实现两个主机之间的通信，则每个主机都得有一个数据链路层地址。

![macip02.png](/images/net/macip02.png "MAC 地址")

### 7.1 MAC 地址（硬件地址/ 物理地址）

#### 7.1.1 MAC 地址的概念

1. 每个主机发送的帧中必须携带标识 **发送主机和接收主机** 的地址，这类地址用于媒体接入控制MAC，所以叫MAC地址；
    - MAC地址一般固化在网卡（网络适配器）的电可擦可编程只读存储器 EEPROM 中，因此 **MAC 地址也被称为硬件地址**。
    - 但这**并不表示 MAC 地址属于物理层**！
    ![macip03.png](/images/net/macip03.png "网卡")

2. 用户主机一般含有两个网络适配器：有线局域网适配器（**有线**网卡）和无线局域网适配器（**无线**网卡）。每个网络适配器都有一个全球唯一的 MAC 地址。交换器和路由器往往有更多的网络接口，也就有更多的 MAC 地址。所以，严格来说，**MAC 地址是对网络上各接口的唯一标识，而不是对网络上各设备的唯一标识**。

#### 7.1.2 MAC 地址的表示方法：EUI-48

- IEEE 802局域网的MAC地址格式：由48个比特，6个字节构成。OUI 由设备厂商向机构申请分配，后三个厂商自行分配；

- **标准表示法：XX-XX-XX-XX-XX-XX**，其他表示法如图所示；

![macip04.png](/images/net/macip04.png "MAC")

- 地址中含有特殊含义的字段：**全球/本地管理，单播/多播**

![macip05.png](/images/net/macip05.png "全球/本地管理，单播/多播")

01——用于特定功能，例如交换机生成树协议所需要的多播地址；

#### 7.1.3 MAC 地址的发送：单播与多播

- 发送顺序：

![macip06.png](/images/net/macip06.png "发送顺序")

- **单播帧，广播帧，多播帧**：
    - 单播和广播如图，目的主机查看帧的目的地址，和自己的MAC地址匹配，或者是广播FFFFF就接受该帧，否则丢弃；
    ![macip07.png](/images/net/macip07.png "单播帧，广播帧")
    - 如果是多播帧，如上述的 b0 = 1（显然为16进制的奇数），收到多播帧的主机查自己的多播组列表，判断是否接受该多播帧；
        - 快速判断多播帧的方法：
        ![macip08.png](/images/net/macip08.png "多播帧")
        - 当给主机配置多播组列表进行私有应用时，不得使用公有的标准多播地址；

- 随机 MAC 地址，保护隐私；

-----------------------
### 7.2 IP 地址（网络层）

IP 地址属于网络层，在这讲解只是因为 IP 地址和 MAC 地址之间存在一定关系；



































